body {
  background: var(--primary);
  color: var(--primary-text);
  font-family: system-ui, sans-serif;
}

h1,
.h1 {
  font-family: var(--header-font), 'Carter One', system-ui;
  font-size: var(--step-4);
}

h2,
.h2 {
  font-size: var(--step-3);
}

h3,
.h3 {
  font-size: var(--step-2);
}

h4,
.h4 {
  font-size: var(--step-1);
}

.emoji-l {
  --wiggle-init: 0deg;
  --wiggle: 7deg;
  display: inline-block;
  font-size: var(--step-4);

  @media (prefers-reduced-motion: no-preference) {
    transition: rotate 300ms 120ms var(--ease-elastic-2);

    &:hover {
      animation: wiggle 300ms var(--ease-elastic-2);
    }
  }
}

pre {
  overflow: auto;
  inline-size: fit-content;
  max-inline-size: 100%;
  padding: var(--space-2xs);
  margin-block: max(11px, var(--space-s));
  /* TODO add color from theme to 1st shadow color-mix */
  box-shadow:
    /* 2px 3px 3px 0px color-mix(in oklch, var(--accent), oklch(15% 0 0) 25% ), */
    4px 5px 0.5px 1px var(--accent),
    /* 6px 8px 3px 0px color-mix(in oklch, var(--accent), var(--contrast) 50%), */
      8px 10px 0.5px 1px var(--contrast);
}

code:not(pre code) {
  --box-shadow: color-mix(
    in oklch,
    var(--tertiary) 50%,
    var(--decrease-contrast) 20%
  );
  position: relative;
  display: inline-block;
  padding-inline: 0.2ch;
  background: var(--tertiary);
  color: var(--text-secondary);
  font-family: var(--code-font), monospace;

  @media (prefers-reduced-motion: no-preference) {
    box-shadow:
      0.01ch 0.01ch var(--box-shadow),
      0.02ch 0.02ch var(--box-shadow),
      0.03ch 0.03ch var(--box-shadow),
      0.04ch 0.04ch var(--box-shadow),
      0.05ch 0.05ch var(--box-shadow),
      0.06ch 0.06ch var(--box-shadow),
      0.07ch 0.07ch var(--box-shadow),
      0.08ch 0.08ch var(--box-shadow),
      0.09ch 0.09ch var(--box-shadow),
      0.1ch 0.1ch var(--box-shadow);
    transition: transform 100ms linear;

    &:hover {
      --box-shadow: color-mix(
        in oklch,
        var(--tertiary) 50%,
        var(--decrease-contrast) 30%
      );
      box-shadow:
        0.01ch 0.01ch var(--box-shadow),
        0.02ch 0.02ch var(--box-shadow),
        0.03ch 0.03ch var(--box-shadow),
        0.04ch 0.04ch var(--box-shadow),
        0.05ch 0.05ch var(--box-shadow),
        0.06ch 0.06ch var(--box-shadow),
        0.07ch 0.07ch var(--box-shadow),
        0.08ch 0.08ch var(--box-shadow),
        0.09ch 0.09ch var(--box-shadow),
        0.1ch 0.1ch var(--box-shadow),
        0.11ch 0.11ch var(--box-shadow),
        0.12ch 0.12ch var(--box-shadow),
        0.13ch 0.13ch var(--box-shadow),
        0.14ch 0.14ch var(--box-shadow),
        0.15ch 0.15ch var(--box-shadow),
        0.16ch 0.16ch var(--box-shadow),
        0.17ch 0.17ch var(--box-shadow),
        0.18ch 0.18ch var(--box-shadow),
        0.19ch 0.19ch var(--box-shadow),
        0.2ch 0.2ch var(--box-shadow);
      transform: translate(-0.1ch, -0.1ch);
    }
  }
}

strong,
.strong {
  --text-shadow: color-mix(
    in oklch,
    currentcolor 60%,
    var(--decrease-contrast) 20%
  );
  color: var(--contrast);
  font-weight: 600;
  text-shadow:
    0.01ch 0.01ch var(--text-shadow),
    0.02ch 0.02ch var(--text-shadow),
    0.03ch 0.03ch var(--text-shadow),
    0.04ch 0.04ch var(--text-shadow),
    0.05ch 0.05ch var(--text-shadow),
    0.06ch 0.06ch var(--text-shadow),
    0.07ch 0.07ch var(--text-shadow),
    0.08ch 0.08ch var(--text-shadow),
    0.09ch 0.09ch var(--text-shadow),
    0.1ch 0.1ch var(--text-shadow);
}

:is(em, .em) {
  /* color: var(--contrast); */
  font-style: italic;
}

blockquote {
  inline-size: fit-content;
  max-inline-size: 80ch;
  padding: var(--space-3xs);
  margin-block: max(10px, var(--space-s));
  margin-inline-start: var(--space-s);
  background: var(--tertiary);
  box-shadow:
    -1px 2px 3px 0px
      color-mix(in oklch, var(--tertiary) 60%, var(--contrast) 15%),
    -4px 5px 1px 1px var(--contrast),
    -5.5px 7px 4px 1px color-mix(in oklch, var(--contrast) 50%, var(--accent)
          20%),
    -8px 10px 1px 1px var(--accent);
}

input:is([type='checkbox'], [type='radio'], [type='range']) {
  accent-color: var(--accent);
}

hr {
  --border-width: clamp(1px, 0.5ch, 10px);
  display: block;
  width: 100%;
  height: var(--border-width);
  border: none;
  border-block-start: dashed var(--border-width) var(--accent);
  margin-block: 0.5ch;
}

media-controller {
  --media-primary-color: color-mix(
    in oklch,
    var(--text-secondary) 85%,
    transparent
  );
  --media-secondary-color: color-mix(
    in oklch,
    var(--tertiary) 75%,
    transparent
  );
  --media-control-hover-background: color-mix(
    in oklch,
    var(--secondary) 75%,
    transparent
  );
}

/* Do not show the airplay button unless AirPlay is available */

/* media-airplay-button[mediaairplayunavailable] {
  display: none;
} */

/* Do not show the captions button if there are no captions for the media */
media-captions-button:not([mediasubtitleslist]) {
  display: none;
}

:where(.icon-only-button) {
  inline-size: var(--size, 2ch);
  block-size: var(--size, 2ch);
  display: inline-grid;
  color: var(--text-secondary, currentcolor);
  padding: 0;
  margin: 0;
  border: none;
  background: none;
  border-radius: 0.25ch;

  &:focus-visible {
    outline: solid var(--contrast) 4px;
  }

  &:hover {
    color: var(--contrast);
  }

  & svg {
    grid-area: 1 / 1;
    margin: 0;
    padding: 0;
  }
}
